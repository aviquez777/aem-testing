<!--/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  ~ Copyright 2017 EDC
  ~ Author : Valerie Trenou
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/-->
<template data-sly-template.head="${ @ page }" data-sly-use.headlibRenderer="headlibs.html"
          data-sly-use.clientLib="/libs/granite/sightly/templates/clientlib.html"> 
	<sly data-sly-test.redirect ="${properties['redirectTarget']}">
		<sly data-sly-resource="${redirect @ resourceType='/apps/edc/components/structure/redirect'}"/>
	</sly>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8"
          data-sly-use.headlibRenderer="headlibs.html"
          data-sly-use.clientLib="/libs/granite/sightly/templates/clientlib.html"/>
    <meta data-sly-test.keywords="${page.keywords}" name="keywords" content="${keywords}"/>
    <meta data-sly-test.description="${properties['jcr:description']}" name="description" content="${description}"/>
    <meta data-sly-test.templateName="${page.templateName}" name="template" content="${templateName}"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0" name="viewport"/>

	<meta name="format-detection" content="telephone=no">


	<sly data-sly-use.pageinfo="com.edc.edcweb.core.models.Page"> 
		<sly data-sly-test.scheme="${request.scheme}" /> 
		<sly data-sly-test.val="${pageinfo.canonical}"/>
		<link rel="canonical" href="${val}" />
	</sly>

    <!--/*~~~~~  story 24287 - Tag for open graph ~~~~~~~~~~~~~~~~*/-->
    <sly data-sly-test="${pageProperties['metaImageFileReference']}">
        <sly data-sly-use.externalImage="${'com.edc.edcweb.core.helpers.LinkExternalizer' @srcPath=pageProperties['metaImageFileReference'], scheme=request.scheme}"/>
    </sly>

    <meta property="og:title" content="${pageProperties['metaTitle'] || page.title}" />
    <meta data-sly-test="${externalImage.PublishLink}" property="og:image" content="${externalImage.PublishLink}" />
    <meta property="og:description" content="${pageProperties['metaDescription'] || properties['jcr:description']}" />

    <!--/*~~~~~  Twitter ~~~~~~~~~~~~~~~~*/-->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@ExportDevCanada" />
    <meta name="twitter:title" content="${pageProperties['metaTitle'] || page.title}" />
    <meta name="twitter:description" content="${pageProperties['metaDescription'] || properties['jcr:description']}" />
    <meta data-sly-test="${externalImage.PublishLink}" name="twitter:image" content="${externalImage.PublishLink}" />
    
    <!--/* Google/Bing Webmaster Tools */-->    
    <meta data-sly-test="${pageinfo.googleSiteVerification}" name="google-site-verification" content="${pageinfo.googleSiteVerification}" /><!--Google SEO-->
    <meta data-sly-test="${pageinfo.msValidate}" name="msvalidate.01" content="${pageinfo.msValidate}" /><!--BING SEO-->

    <sly data-sly-include="customheaderlibs.html"></sly>
    <sly data-sly-call="${headlibRenderer.headlibs @
                                designPath         = page.designPath,
                                staticDesignPath   = page.staticDesignPath,
                                clientLibCategories = page.clientLibCategories}"></sly>
  <!--/* For IE 9 and below. ICO should be 32x32 pixels in size */-->
  <!--/*<sly data-sly-test.faviconIco="${page.favicons['faviconIco']}"> */-->
  <!--/*- Temporary fix */-->
    <sly data-sly-test.faviconIco="/etc.clientlibs/edc/clientlibs/clientlib-base/resources/favicon.ico">
        <!--[if IE]><link rel="shortcut icon" href="${faviconIco}"/><![endif]-->
    </sly>
        <!--[if IE]><link rel="shortcut icon" href="${faviconIco}"/><![endif]-->
    </sly>
    <!--/* Firefox, Chrome, Safari, IE 11+ and Opera. 196x196 pixels in size. */-->
    <link data-sly-test.faviconPng="${page.favicons['faviconPng']}"
          rel="icon" type="image/png" href="${faviconPng}"/>

    <link data-sly-test="${!faviconPng && faviconIco}"
          rel="icon" href="${faviconIco}"/>

    <link data-sly-test.touchIcon60="${page.favicons['touchIcon60']}"
          rel="apple-touch-icon" sizes="60x60" href="${touchIcon60}"/>

    <link data-sly-test.touchIcon76="${page.favicons['touchIcon76']}"
          rel="apple-touch-icon" sizes="76x76" href="${touchIcon76}"/>

    <link data-sly-test.touchIcon120="${page.favicons['touchIcon120']}"
          rel="apple-touch-icon" sizes="120x120" href="${touchIcon120}"/>

    <link data-sly-test.touchIcon152="${page.favicons['touchIcon152']}"
          rel="apple-touch-icon" sizes="152x152" href="${touchIcon152}"/>

    <title>${page.title}</title>

	<sly data-sly-test="${properties.enableperformancetest == 'on'}" data-sly-include="/apps/edc/components/common/performancetestingscript.html"/>

    <sly data-sly-use.languageToggle="com.edc.edcweb.core.components.LanguageToggle"/>
    <sly data-sly-use.linkresolver="${'com.edc.edcweb.core.helpers.LinkExternalizer' @srcPath=languageToggle.url, scheme=request.scheme}"/>
    <link data-sly-test="${linkresolver.publishPageUrl}" rel="alternate" href="${linkresolver.publishPageUrl}" hreflang="${languageToggle.abbreviation}" />
    <sly data-sly-use.linkresolver="${'com.edc.edcweb.core.helpers.LinkExternalizer' @srcPath=languageToggle.toggleUrl, scheme=request.scheme}"/>
    <link data-sly-test="${linkresolver.publishPageUrl}" rel="alternate" href="${linkresolver.publishPageUrl}" hreflang="${languageToggle.toggleAbbreviation}" />

</template>
